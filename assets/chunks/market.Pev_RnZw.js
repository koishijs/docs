import{m as c,a as C,w as s,b}from"./theme.cVOtyKDo.js";import{_ as y,j as a,k as n,l as r,d as V,r as w,o as x,B,u as e,f as d,z as _,t as h,C as $,b as u,y as L,q as M}from"./framework.dWv-GhMG.js";const N={},S={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},z=r("path",{fill:"currentColor",d:"M379.8 197.6c5.031-7.344 5.563-16.88 1.406-24.75C377.1 164.9 368.9 160 360 160h-156.6l50.84-127.1c2.969-7.375 2.062-15.78-2.406-22.38S239.1 0 232 0h-176C43.97 0 33.81 8.906 32.22 20.84l-32 240C-.7179 267.7 1.376 274.6 5.938 279.8C10.5 285 17.09 288 24 288h146.3l-41.78 194.1c-2.406 11.22 3.469 22.56 14 27.09C145.6 511.4 148.8 512 152 512c7.719 0 15.22-3.75 19.81-10.44L379.8 197.6zM190.1 256H33.15l29.87-224h157.2L164.9 170.1C160.7 180.6 168.5 192 179.8 192h165l-176.5 257.1l37.43-174.6C207.9 265.4 200.3 256 190.1 256z"},null,-1),j=[z];function D(m,i){return a(),n("svg",S,j)}const U=y(N,[["render",D]]),q={key:0,class:"market-list"},E=r("h1",null,"插件市场",-1),H={class:"info"},I={class:"timestamp"},J=["href"],O={key:1,class:"market-loading"},P={key:0},R={key:1},F=V({__name:"market",setup(m){const i=w();x(async()=>{try{c.refresh()}catch(t){i.value=t}});function p(t){return`https://koishi.online/plugins/${t}?share=`+btoa(JSON.stringify({share:{name:t},plugins:{[`~${t}`]:{}}}))}return(t,l)=>{const f=B("el-tooltip");return e(c)?(a(),n("div",q,[d(e(b),{gravatar:"https://cravatar.cn",modelValue:e(s),"onUpdate:modelValue":l[1]||(l[1]=o=>u(s)?s.value=o:null),data:e(c).objects},{header:_(({hasFilter:o,all:k,packages:v})=>[E,r("div",H,[$(" 当前共有 "+h(o?v.length+" / ":"")+h(k.length)+" 个可用于 v4 版本的插件 ",1),r("span",I,"("+h(new Date(e(c).time).toLocaleString())+")",1)]),d(e(C),{class:"k-card",modelValue:e(s),"onUpdate:modelValue":l[0]||(l[0]=g=>u(s)?s.value=g:null)},null,8,["modelValue"])]),action:_(o=>[o.portable?(a(),L(f,{key:0,content:"快速体验",placement:"bottom"},{default:_(()=>[r("a",{class:"portable-button",href:p(o.shortname),rel:"noopener noreferer",target:"_blank"},[d(U)],8,J)]),_:2},1024)):M("",!0)]),_:1},8,["modelValue","data"])])):(a(),n("div",O,[i.value?(a(),n("div",P," 插件市场加载失败。 ")):(a(),n("div",R," 正在加载插件市场…… "))]))}}});export{F as default};
